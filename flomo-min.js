let o,i,r=0,a=[],l=document.getElementById("timer"),t=document.getElementById("startBtn"),c=document.getElementById("stopBtn"),e=document.getElementById("endSessionBtn"),s=document.getElementById("breakInfo"),n=document.getElementById("logs");function d(){i||(o=Date.now(),i=setInterval(u,1e3),c.textContent="Stop",k(),s.textContent="")}function u(){var t=Date.now()-o,e=Math.floor(t/6e4),t=Math.floor(t%6e4/1e3);l.textContent=g(e)+":"+g(t)}function g(t){return t.toString().padStart(2,"0")}function m(){var t,e,n;"Stop"===c.textContent?(clearInterval(i),i=null,e=Math.floor((Date.now()-o)/1e3),r+=e,e=(Math.floor(e/60)+e%60/60)/5,t=Math.floor(e),e=Math.round(60*(e-t)),(n=new Date).setMinutes(n.getMinutes()+t),n.setSeconds(n.getSeconds()+e),n=`${g(n.getHours())}:${g(n.getMinutes())}:`+g(n.getSeconds()),s.textContent=`Take a break for ${g(t)}:${g(e)} min. Be back at ${n}.`,n=new Date,a.push(n.toLocaleTimeString()),f(),c.textContent="Reset",setTimeout(()=>{h(),p()},1e3*(60*t+e))):(l.textContent="00:00",s.textContent="",c.textContent="Stop")}function f(){n.innerHTML="<h3 style='color: white;'>Stop Times:</h3><ul>"+a.map(t=>`<li>${t}</li>`).join("")+"</ul>"}function v(){i&&(t=Math.floor((Date.now()-o)/1e3),r+=t,clearInterval(i),i=null),k(),s.textContent="";var t=Math.floor(r/3600),e=Math.floor(r%3600/60),n=r%60,t=`${g(t)}:${g(e)}:`+g(n);alert(`Session ended!
Total study time: ${t}.`),r=0,a=[],f(),l.textContent="00:00",c.textContent="Stop"}t.addEventListener("click",d),c.addEventListener("click",m),e.addEventListener("click",v);let S;function h(){let t=document.getElementById("bellSound");S=setInterval(()=>{t.play()},1e3)}function k(){clearInterval(S)}function p(){var t=localStorage.getItem("notificationPermission");"granted"===t?new Notification("Time’s up!",{body:"Get back to work.",icon:"icon.png"}):"default"!==t&&null!==t||Notification.requestPermission().then(t=>{localStorage.setItem("notificationPermission",t),"granted"===t&&new Notification("Time’s up!",{body:"Get back to work.",icon:"icon.png"})})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered with scope:",t.scope)}).catch(t=>{console.error("Service Worker registration failed:",t)});